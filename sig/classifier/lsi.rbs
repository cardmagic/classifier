module Classifier
  class LSI
    @auto_rebuild: bool
    @word_list: WordList
    @items: Hash[untyped, ContentNode]
    @version: Integer
    @built_at_version: Integer

    attr_reader word_list: WordList
    attr_accessor auto_rebuild: bool

    def self.gsl_available: () -> bool
    def self.gsl_available=: (bool value) -> bool

    def initialize: (?Hash[Symbol, untyped] options) -> void

    def needs_rebuild?: () -> bool

    def add_item: (untyped item, *untyped categories) ?{ (untyped) -> String } -> void

    def <<: (untyped item) -> void

    def categories_for: (untyped item) -> Array[untyped]

    def remove_item: (untyped item) -> void

    def items: () -> Array[untyped]

    def build_index: (?Float cutoff) -> void

    def highest_relative_content: (?Integer max_chunks) -> Array[untyped]

    def proximity_array_for_content: (untyped doc) ?{ (untyped) -> String } -> Array[[untyped, Float]]

    def proximity_norms_for_content: (untyped doc) ?{ (untyped) -> String } -> Array[[untyped, Float]]

    def search: (String string, ?Integer max_nearest) -> Array[untyped]

    def find_related: (untyped doc, ?Integer max_nearest) ?{ (untyped) -> String } -> Array[untyped]

    def classify: (untyped doc, ?Float cutoff) ?{ (untyped) -> String } -> untyped

    def vote: (untyped doc, ?Float cutoff) ?{ (untyped) -> String } -> Hash[untyped, Float]

    def classify_with_confidence: (untyped doc, ?Float cutoff) ?{ (untyped) -> String } -> [untyped, Float?]

    def highest_ranked_stems: (untyped doc, ?Integer count) -> Array[Symbol]

    private

    def build_reduced_matrix: (untyped matrix, ?Float cutoff) -> untyped

    def node_for_content: (untyped item) ?{ (untyped) -> String } -> ContentNode

    def make_word_list: () -> void
  end
end
